<!DOCTYPE html>
<html>
 <head>
 <meta charset="utf-8">
 </head>
<body>
<p>Дана емкость с 8 литрами жидкости и еще две емкости по 3 и 5 литров. Переливая жидкость между емкостями добиться в одной из них 4 литров жидкости. </p>
<label> ИЗ <input id="data1"> </input> </label>
<label> В <input id="data2"> </input> </label>
<div id="out"> </div> <br/>
<button onclick="trans()"> Перелить </button>	
<table id="itteration" border="2">
<tr><td width="200">8</td><td width="200">0</td><td width="200">0</td></tr>
</table>
	
	<script>
	
	function addRow()
	{
	let tbl = document.getElementById ("itteration");                   // таблица, с которой работаем
	let rws = tbl.rows;                                            // коллекция существующих строк таблицы
	let lst = rws [rws.length - 1];                                // последняя (самая нижняя) существующая строка таблицы
	let cls = rws.cells.length;                                    // количество ячеек в последней существующей строке
 
	let ro = tbl.insertRow (-1);                                   // добавляем снизу ОБРАЗ ещё одной строки
	for (let j = 0; j < cls; j++)                                  // создаём цикл из cls шагов (по количеству ячеек)
	{
	let ce = ro.insertCell (-1);                                // на каждом шаге в образ строки добавляем ОБРАЗ новой ячейки
	ce.innerHTML = 'хрен его знает, <b>чего</b> тут вписывать'; // и добавляем в этот образ новой ячейки HTML-код, превращая образ в РЕАЛЬНУЮ ячейку
	}
// по завершению цикла, когда ВСЕ ячейки получат содержимое, ОБРАЗ добавленной строки превратится в РЕАЛЬНУЮ строку
	}
	
		var current = {8: 8,						// объект с текущими значениями кол-ва жидкости(value) в каждой емскости(ключ)
					   5: 0,
					   3: 0};
		var result = "8-ми лит.   5-и лит.   3-х лит." + "<br/>";
	
	function trans()
	{
		let inData1 = document.getElementById("data1");
		let str1  = inData1.value;
		let From = Number(str1); 						// емкость, из которой выливаем
		let inData2 = document.getElementById("data2");
		let str2  = inData2.value;
		let To = Number(str2);							// емкость, в которую льем
		let divOut = document.getElementById ("out");
		

		
		let value = current[To];						// получаем текущее значение, из емкости куда льем          
		let FreeSpace = To - value;						// получаем значение, сколько свободного места в емкости в которую льем
		
		if (FreeSpace >=0)  							// заходим в цикл только если есть свободное место куда лить
		{
			if (FreeSpace < current[From])        		// если свободного места меньше, чем кол-во жидкости в емкости из которой переливаем
			{
			 current[From] = current[From] - FreeSpace;  // получаем остаток в емскости из которой переливали
			 current[To] = To;							 // текущее значение в емкости, куда заливали стало максимальным			
			}
		}
														/// снова находим текущии значения, чтобы не пошел в цикл 
		 value = current[To];							// получаем текущее значение, из емкости куда льем          
		 FreeSpace = To - value;						// получаем значение, сколько свободного места в емкости в которую льем
		 
		if (FreeSpace >=0)  							// заходим в цикл только если есть свободное место куда лить
		{
			if (FreeSpace >= current[From]) 			 // если свободного места больше, чем в емкости из которой льем
			{
			 current[To] = current[From] + current[To];
			 current[From] = 0;
			}
		
		}
		result = result + current[8] + " "+ " "+ " " + current[5] + " " + " "+ " "+  current[3] + "<br/>" ;
		if (current[8] == 4 || current[5]==4 || current[3]==4)
		{
		result = result + "Успех! Наконец-то!";
		}
		divOut.innerHTML = result;
	}	

	
	
	
	</script>
</body>
</html>