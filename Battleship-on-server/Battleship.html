<!DOCTYPE html>
<html>
 <head>
 <meta charset="utf-8">
 </head>
<body>	
<input id="crdnt">координаты </input>

<div id="out" style ="white-space:pre; font-family:monospace" > </div> <br/>
<div id="out1" style ="white-space:pre; font-family:monospace" > </div> <br/>
<div id="out2" style ="white-space:pre; font-family:monospace" > </div> <br/>
<button id="begin" onclick="beginning()"> начать</button>	
<button id="shoot" onclick="shooting()"> стрелять</button>	
		<script>
		let numbers = [0,1,2,3,4,5,6,7,8,9];
		//let letters = ["a","b","c","d","e","f","g","h","j","k"];
		let letters = ["а","б","в","г","д","е","ж","з","и","к"];
		let fld = [[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		[" "," ", " ", " ", " ", " ", " ", " ", " ", " " ],
		]
		let divOut = document.getElementById ("out");
		function field()
		{
		let result = "";
		for( let i=0; i< numbers.length; i++)
		{
		 result = result + numbers[i]+"                   "+"|"+"<br/>";						// обрамить тегом <pre></pre>
		};
			divOut.innerHTML = "&nbsp"+letters +"<br/>"+ result+ "-------------------";
		}		
		field();
		
		
	function beginning()
	{
		let inData = document.getElementById("crdnt");
		let str  = inData.value;
		let data = str.split (',');
		let result = "";
		let lett = ""; 
		let numm = "";  
		let myRequest = new XMLHttpRequest();	


		let out1 = document.getElementById("out1");
		let out2 = document.getElementById("out2");

		
			if (str.trim() === "") 
			{
			result = "Нет данных";
			divOut.innerHTML = result;
			
			}
		
		function handle1()
		{
			if (myRequest.readyState == 4 ){       //4-статус запроса - полностью завершен, есть все данные для работы с ними
				if (myRequest.status == 200) 
				{
				let data = myRequest.responseText;
				let jsdata = JSON.parse(data); // преобразует строки содержащую JSON в js объект
				if(typeof jsdata.status != "undefined")
				
				{
				out1.innerHTML = jsdata.status;
				}
				if (jsdata.id != "")
				{
				state = jsdata.id;
				}
				else {state = "145";}
			result = result +"<table  border=2px>"+ "<tr>" + "<td width=150>"+jsdata.left+"</td>" + "<td width=150>"+ jsdata.right+"</td>" + "</tr>" + "<br/>";
				}
				else {out1.innerHTML = "mistake";}
			out2.innerHTML = result;
			}
		}
		myRequest.onreadystatechange = handle1;
		myRequest.open("GET","start?present="+data,true);  // true - aсинхронный запрос
		myRequest.send(null);		
	}
	
	
	function shooting()
	{
		let inData = document.getElementById("crdnt");
		let str  = inData.value;
		let data = str.split (',');
		let result = "";
		let lett = ""; 
		let numm = "";  
		let myRequest = new XMLHttpRequest();
		
		
		let out1 = document.getElementById("out1");
		let out2 = document.getElementById("out2");
		
			if (str.trim() === "") 
			{
			result = "Нет данных";
			divOut.innerHTML = result;
			
			}
		
		function handle2()
		{
			if (myRequest.readyState == 4 ){       //4-статус запроса - полностью завершен, есть все данные для работы с ними
				if (myRequest.status == 200) 
				{
				let data = myRequest.responseText;
				let jsdata = JSON.parse(data); // преобразует строки содержащую JSON в js объект
				if(typeof jsdata.status != "undefined")
				
				{
				out1.innerHTML = jsdata.status;
				}
				if (jsdata.id != "")
				{
				state = jsdata.id;
				}
				else {state = "145";}
			result = result +"<table  border=2px>"+ "<tr>" + "<td width=150>"+jsdata.left+"</td>" + "<td width=150>"+ jsdata.right+"</td>" + "</tr>" + "<br/>";
				}
				else {out1.innerHTML = "mistake";}
			out2.innerHTML = result;
			}
		}
		myRequest.onreadystatechange = handle2;
		myRequest.open("GET","start?present="+data,true);  // true - aсинхронный запрос
		myRequest.send(null);		
	}
		let btn1 = document.getElementById("begin");
		btn1.addEventListener("click", beginning, false);
		
		let btn2 = document.getElementById("shoot");
		btn2.addEventListener("click", shooting, false);
		//crdnt.onclick = work;

	
	</script>
</body>
</html>